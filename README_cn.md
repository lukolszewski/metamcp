# ğŸš€ MetaMCP
### æ™ºèƒ½ MCP ç½‘å…³ï¼šèšåˆå™¨ã€ç¼–æ’å™¨ä¸æ™ºèƒ½è¯­ä¹‰æœç´¢ <div align="center">

<div align="center">
  <a href="https://opensource.org/licenses/MIT" style="text-decoration: none;">
    <img src="https://img.shields.io/badge/License-AGPLv3-red.svg?style=flat-square" alt="License" style="max-width: 100%;">
  </a>
  <a href="https://github.com/metatool-ai/metamcp/pkgs/container/metamcp" style="text-decoration: none;">
    <img src="https://img.shields.io/badge/GHCR-available-green.svg?style=flat-square&logo=github" alt="GHCR" style="max-width: 100%;">
  </a>
</div>

</div>

**MetaMCP** æ˜¯æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ˆMCPï¼‰çš„ä¸‹ä¸€ä»£ä»£ç†ã€‚å®ƒå°†å¤šä¸ª MCP æœåŠ¡å™¨èšåˆä¸ºä¸€ä¸ªç»Ÿä¸€çš„ç«¯ç‚¹ï¼Œå¹¶å……å½“ LLM çš„æ™ºèƒ½ç½‘å…³ã€‚

> ğŸ† **é¦–ä¸ªä¸”å”¯ä¸€å…·å¤‡çœŸæ­£è¯­ä¹‰æ™ºèƒ½çš„å¼€æº MCP è§£å†³æ–¹æ¡ˆã€‚**
>
> å…¶ä»–ä»£ç†ä»…ä»…æ˜¯ç½—åˆ—å·¥å…·ï¼Œè€Œ MetaMCP åˆ™ä¸»åŠ¨ç®¡ç†å®ƒä»¬ã€‚å®ƒæ˜¯ç›®å‰**å”¯ä¸€**èƒ½å¤ŸèšåˆæœåŠ¡å™¨ã€åŠ¨æ€é‡å†™å·¥å…·å®šä¹‰ï¼Œ**å¹¶ä¸”**æ‰§è¡Œ AI é©±åŠ¨çš„è¯­ä¹‰æœç´¢ä»¥å¤§å¹…å‡å°‘ä¸Šä¸‹æ–‡çª—å£å ç”¨çš„å¼€æºå·¥å…·ã€‚

### âš¡ ä¸ºä»€ä¹ˆé€‰æ‹© MetaMCPï¼Ÿ

éšç€ä½ æ·»åŠ æ›´å¤šçš„ MCP æœåŠ¡å™¨ï¼ˆFilesystem, GitHub, Postgres, Slackï¼‰ï¼Œå¯ç”¨å·¥å…·åˆ—è¡¨ä¼šå¢é•¿åˆ°æ•°åƒè¡Œ JSONã€‚å°†æ•´ä¸ªåˆ—è¡¨æŠ•å–‚ç»™ LLM ä¼šæ¶ˆè€—å¤§é‡çš„ä¸Šä¸‹æ–‡ Tokenï¼Œå¢åŠ æˆæœ¬ï¼Œå¹¶æ··æ·†æ¨¡å‹ã€‚

**MetaMCP é€šè¿‡æ™ºèƒ½æ¨¡å¼ï¼ˆSmart Modeï¼‰è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚** MetaMCP ä¸ä¼šå°† 500 å¤šä¸ªå·¥å…·å…¨éƒ¨ä¸¢å…¥ä¸Šä¸‹æ–‡ï¼Œè€Œæ˜¯åªå±•ç¤ºä¸¤ä¸ªå·¥å…·ï¼š`discover`ï¼ˆå‘ç°ï¼‰å’Œ `execute`ï¼ˆæ‰§è¡Œï¼‰ã€‚

| ç‰¹æ€§ | æè¿° |
| :--- | :--- |
| ğŸ§  **AI é©±åŠ¨çš„æ™ºèƒ½æ¨¡å¼** | ä½¿ç”¨ Embeddingsï¼ˆå‘é‡æœç´¢ï¼‰æˆ–æ¨¡ç³ŠåŒ¹é…ï¼Œåœ¨ LLM éœ€è¦æ—¶ç²¾ç¡®æ‰¾åˆ°æ‰€éœ€çš„å·¥å…·ã€‚ |
| ğŸ“‰ **ä¸Šä¸‹æ–‡ç¼©å‡** | é€šè¿‡éšè—æœªä½¿ç”¨çš„å·¥å…·ç›´åˆ°è¢«â€œå‘ç°â€ï¼Œå¯å‡å°‘é«˜è¾¾ 90% çš„ä¸Šä¸‹æ–‡ä½¿ç”¨ã€‚ |
| âœ‚ï¸ **æ™ºèƒ½æˆªæ–­** | åœ¨ç”Ÿæˆ Embedding ä¹‹å‰è‡ªåŠ¨ä»æè¿°ä¸­å‰¥ç¦»å†—é•¿çš„ Schemaï¼Œç¡®ä¿æœç´¢ä¸“æ³¨äºæ ¸å¿ƒåŠŸèƒ½ã€‚ |
| ğŸ”§ **å·¥å…·è½¬æ¢** | åœ¨ LLM çœ‹åˆ°å·¥å…·**ä¹‹å‰**ï¼ŒåŠ¨æ€è¿‡æ»¤ã€é‡å‘½åå’Œé‡å†™å·¥å…·æè¿°ã€‚ |
| ğŸ”Œ **ä¾›åº”å•†æ— å…³** | å¯æ¥å…¥ **ä»»ä½•** OpenAI å…¼å®¹çš„ Embedding æä¾›å•†ï¼ˆOllama, DeepInfra, OpenAI ç­‰ï¼‰ã€‚ |
| ğŸ—„ï¸ **æŒä¹…åŒ–å‘é‡æ•°æ®åº“** | å†…ç½® PostgreSQL + `pgvector` è®¾ç½®ï¼Œå®ç°æé€Ÿè¯­ä¹‰æ£€ç´¢ã€‚ |

---

![MetaMCP Diagram](metamcp.svg)


[English](./README.md) | ä¸­æ–‡

## ğŸ“‹ ç›®å½• - [ğŸ¯ ä½¿ç”¨åœºæ™¯](#-ä½¿ç”¨åœºæ™¯)
- [ğŸ“– æ ¸å¿ƒæ¦‚å¿µ](#-æ ¸å¿ƒæ¦‚å¿µ)
  - [ğŸ–¥ï¸ MCP æœåŠ¡å™¨ç®¡ç†](#ï¸-mcp-æœåŠ¡å™¨ç®¡ç†)
  - [ğŸ§  æ™ºèƒ½æ¨¡å¼ï¼ˆä¸Šä¸‹æ–‡æ•‘æ˜Ÿï¼‰](#-æ™ºèƒ½æ¨¡å¼ä¸Šä¸‹æ–‡æ•‘æ˜Ÿ)
  - [âœ‚ï¸ æ™ºèƒ½æˆªæ–­ä¸ Embeddings](#ï¸-æ™ºèƒ½æˆªæ–­ä¸-embeddings)
  - [âœï¸ å·¥å…·è¿‡æ»¤ã€é‡å‘½åä¸è¦†ç›–](#ï¸-å·¥å…·è¿‡æ»¤é‡å‘½åä¸è¦†ç›–)
- [ğŸ—ï¸ æ¶æ„ä¸é€»è¾‘æµ](#ï¸-æ¶æ„ä¸é€»è¾‘æµ)
- [ğŸš€ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [ğŸ”Œ è¿æ¥åˆ° MetaMCP](#-è¿æ¥åˆ°-metamcp)
- [ğŸ” è®¤è¯ä¸ä¼ä¸šçº§åŠŸèƒ½](#-è®¤è¯ä¸ä¼ä¸šçº§åŠŸèƒ½)
- [ğŸ¤ è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)

## ğŸ¯ ä½¿ç”¨åœºæ™¯

- **ç»Ÿä¸€ç½‘å…³ï¼š** å°† 10+ ä¸ª MCP æœåŠ¡å™¨ï¼ˆå¦‚ Brave Search, Google Drive, Linearï¼‰æ‰˜ç®¡åœ¨å•ä¸ªç«¯ç‚¹ URL ä¹‹åã€‚
- **ä¸Šä¸‹æ–‡ä¼˜åŒ–ï¼š** ä½¿ç”¨ **æ™ºèƒ½æ¨¡å¼** å…è®¸ Agent è®¿é—®æ•°ç™¾ä¸ªå·¥å…·ï¼Œè€Œä¸ä¼šè¶…å‡º Token é™åˆ¶æˆ–æ··æ·†æ¨¡å‹ã€‚
- **å®‰å…¨ä¸æ²»ç†ï¼š** é‡å‘½åå·¥å…·ä»¥éµå¾ªå†…éƒ¨è§„èŒƒï¼Œå¹¶éšè— Agent ä¸åº”è®¿é—®çš„å·¥å…·ï¼ˆä¾‹å¦‚éšè—æ–‡ä»¶ç³»ç»Ÿ MCP ä¸­çš„ `delete_file`ï¼‰ã€‚
- **ä¼ä¸šçº§éƒ¨ç½²ï¼š** å¼€ç®±å³ç”¨çš„å¤šç§Ÿæˆ·ã€OIDC/SSO æ”¯æŒå’Œ API Key ç®¡ç†ã€‚

## ğŸ“– æ ¸å¿ƒæ¦‚å¿µ

### ğŸ–¥ï¸ MCP æœåŠ¡å™¨ç®¡ç†
MetaMCP è¿æ¥åˆ°â€œä¸‹æ¸¸â€MCP æœåŠ¡å™¨ã€‚è¿™äº›å¯ä»¥æ˜¯åŸºäº stdioï¼ˆDocker ç®¡ç†ï¼‰æˆ–è¿œç¨‹ HTTP/SSE æœåŠ¡å™¨ã€‚

**ç¯å¢ƒå˜é‡ï¼š**
MetaMCP å®‰å…¨åœ°å¤„ç†æœºå¯†ä¿¡æ¯ã€‚ä½ å¯ä»¥ä¼ é€’åŸå§‹å€¼æˆ–å¼•ç”¨çˆ¶å®¹å™¨ä¸­çš„ç¯å¢ƒå˜é‡ï¼š
```json
"HackerNews": {
  "type": "STDIO",
  "command": "uvx",
  "args": ["mcp-hn"],
  "env": {
    "API_KEY": "${OPENAI_API_KEY}" // åœ¨è¿è¡Œæ—¶å®‰å…¨è§£æ
  }
}
```

### ğŸ§  æ™ºèƒ½æ¨¡å¼ï¼ˆä¸Šä¸‹æ–‡æ•‘æ˜Ÿï¼‰

è¿™æ˜¯æœ¬åˆ†æ”¯çš„æ ¸å¿ƒåˆ›æ–°ã€‚å¯ç”¨æ™ºèƒ½æ¨¡å¼åï¼ŒLLM ä¸ä¼šçœ‹åˆ° 100 å¤šä¸ªå·¥å…·çš„å®Œæ•´åˆ—è¡¨ã€‚å®ƒåªçœ‹åˆ°ï¼š
1.  **`discover`**ï¼šæ¥å—è‡ªç„¶è¯­è¨€æŸ¥è¯¢ï¼ˆä¾‹å¦‚ï¼Œâ€œæˆ‘éœ€è¦æ£€æŸ¥å‰ç«¯ä»“åº“çš„æœ€æ–° PRâ€ï¼‰ã€‚
2.  **`execute`**ï¼šæŒ‰åç§°æ‰§è¡Œç‰¹å®šå·¥å…·ã€‚

**æœç´¢ç­–ç•¥ï¼š**
* **å…³é”®è¯æœç´¢ï¼ˆæ¨¡ç³ŠåŒ¹é…ï¼‰ï¼š** é€Ÿåº¦å¿«ï¼Œæ— éœ€å¤–éƒ¨ APIã€‚é€‚ç”¨äºç¡®åˆ‡çš„å·¥å…·åç§°ã€‚
* **AI è¯­ä¹‰æœç´¢ï¼ˆEmbeddingsï¼‰ï¼š** é‡é‡çº§åŠŸèƒ½ã€‚å°†å·¥å…·æè¿°å’Œç”¨æˆ·æŸ¥è¯¢è½¬æ¢ä¸ºå‘é‡ã€‚å®ƒèƒ½ç†è§£â€œæŸ¥çœ‹å¤©æ°”â€ä¸åä¸º `get_meteorological_data` çš„å·¥å…·æ˜¯åŒ¹é…çš„ã€‚

### âœ‚ï¸ æ™ºèƒ½æˆªæ–­ä¸ Embeddings

åŸå§‹å·¥å…·æè¿°é€šå¸¸åŒ…å«å†—é•¿çš„ Schemaã€å‚æ•°å®šä¹‰å’Œæ ·æ¿æ–‡å­—ï¼Œè¿™å¯èƒ½ä¼šå¹²æ‰°è¯­ä¹‰æœç´¢ã€‚MetaMCP åŒ…å«ä¸€ä¸ªå¯é…ç½®çš„ **æˆªæ–­å¼•æ“**ï¼Œç”¨äºåœ¨ç”Ÿæˆ Embedding ä¹‹å‰æ¸…ç†æ•°æ®ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šå‰¥ç¦»ç¬¬ä¸€ä¸ªæ¢è¡Œç¬¦ä¹‹åçš„æ‰€æœ‰å†…å®¹ï¼ˆé€šå¸¸ç”¨äºåˆ†éš”æè¿°ä¸ Schemaï¼‰ï¼Œä»¥ç¡®ä¿ AI ä»…å…³æ³¨å·¥å…·çš„**åŠŸèƒ½**ã€‚

**é…ç½® (.env):**
```bash
# å¯ç”¨æˆªæ–­é€»è¾‘
EMBEDDING_TRUNCATE_ENABLED=true

# æŒ‰æ¢è¡Œç¬¦åˆ†å‰²ï¼ˆæ£€æµ‹æè¿°çš„ç»“å°¾ï¼‰
EMBEDDING_TRUNCATE_DELIMITER="\n" 

# ä¿ç•™åˆ†éš”ç¬¦ç¬¬ä¸€æ¬¡å‡ºç°ä¹‹å‰çš„å†…å®¹
EMBEDDING_TRUNCATE_OCCURRENCE=1    

# å¦‚æœç»“æœå¤ªçŸ­åˆ™è·³è¿‡æˆªæ–­ï¼ˆé˜²æ­¢ç”Ÿæˆç©º Embeddingï¼‰
EMBEDDING_TRUNCATE_MIN_LENGTH=5    
```
*æ³¨æ„ï¼šç”±äºä½ å¯ä»¥åœ¨ UI ä¸­é‡å†™å·¥å…·æè¿°ï¼Œä½ å¯ä»¥æ’å…¥è‡ªå®šä¹‰çš„åˆ†éš”ç¬¦æ¥å®Œç¾è°ƒæ•´å·¥å…·çš„ç´¢å¼•æ–¹å¼ã€‚*

### âœï¸ å·¥å…·è¿‡æ»¤ã€é‡å‘½åä¸è¦†ç›–

æœ‰æ—¶ä¸Šæ¸¸ MCP æœåŠ¡å™¨æä¾›çš„æè¿°å¾ˆå·®æˆ–åç§°ä»¤äººå›°æƒ‘ã€‚MetaMCP å…è®¸ä½ åŠ¨æ€è½¬æ¢è¿™äº›å®šä¹‰ã€‚

* **è¿‡æ»¤ï¼š** ä»èšåˆåˆ—è¡¨ä¸­å®Œå…¨éšè—ç‰¹å®šå·¥å…·ï¼ˆä¾‹å¦‚ï¼Œç¦ç”¨ `delete_database`ï¼‰ã€‚
* **é‡å‘½åï¼š** å°† `func_a1` æ›´æ”¹ä¸º `get_customer_data`ï¼Œä»¥ä¾¿ LLM ç†è§£ã€‚
* **é‡å†™æè¿°ï¼š** é€šè¿‡é˜æ˜å·¥å…·çš„ä½œç”¨æ¥æé«˜ Prompt éµå¾ªåº¦ã€‚
* **æ³¨è§£ï¼š** ä¸ºç‰¹å®šå·¥å…·é™„åŠ è‡ªå®šä¹‰å…ƒæ•°æ®ï¼ˆä¾‹å¦‚ `readOnlyHint`ï¼‰ã€‚

æ‰€æœ‰è¿™äº›éƒ½é€šè¿‡ UI è¿›è¡Œç®¡ç†ï¼Œå¹¶æŒä¹…åŒ–å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚

## ğŸ—ï¸ æ¶æ„ä¸é€»è¾‘æµ

ä¸å…¶ä»–ç®€å•è½¬å‘æµé‡çš„ä»£ç†ä¸åŒï¼ŒMetaMCP å……å½“äº†ä¸€ä¸ªæ™ºèƒ½è½¬æ¢å±‚ã€‚

### MetaMCP å¦‚ä½•å¤„ç†è¯·æ±‚

```mermaid
sequenceDiagram
    participant Client as MCP å®¢æˆ·ç«¯ (LLM)
    participant MetaMCP as MetaMCP ç½‘å…³
    participant VectorDB as å‘é‡æ•°æ®åº“ (pgvector)
    participant AI as AI Embedding æä¾›å•†
    participant Servers as ä¸‹æ¸¸ MCP æœåŠ¡å™¨

    Note over Client, Servers: åœºæ™¯ Aï¼šæ ‡å‡†èšåˆ
    Client->>MetaMCP: åˆ—å‡ºå·¥å…· (List Tools)
    MetaMCP->>Servers: è·å–æ‰€æœ‰æœåŠ¡å™¨çš„å·¥å…·
    Servers-->>MetaMCP: åŸå§‹å·¥å…·åˆ—è¡¨
    MetaMCP->>MetaMCP: è¿‡æ»¤ã€é‡å‘½ååŠé‡å†™æè¿°
    MetaMCP-->>Client: è¿”å›ç»Ÿä¸€ä¸”æ¸…ç†åçš„å·¥å…·åˆ—è¡¨

    Note over Client, Servers: åœºæ™¯ Bï¼šæ™ºèƒ½æ¨¡å¼ï¼ˆä¸Šä¸‹æ–‡ä¼˜åŒ–ï¼‰
    Client->>MetaMCP: è°ƒç”¨å·¥å…·: "discover" (query="æŸ¥æ‰¾å¤©æ°”å·¥å…·")
    
    alt å…³é”®è¯æœç´¢
        MetaMCP->>MetaMCP: æ¨¡ç³ŠåŒ¹é… (MiniSearch)
    else è¯­ä¹‰æœç´¢ (AI)
        MetaMCP->>AI: ç”ŸæˆæŸ¥è¯¢å‘é‡
        AI-->>MetaMCP: è¿”å›å‘é‡
        MetaMCP->>VectorDB: æŸ¥è¯¢ç›¸ä¼¼å·¥å…·
        VectorDB-->>MetaMCP: è¿”å›æ’åºç»“æœ
    end
    
    MetaMCP-->>Client: ä»…è¿”å›ç›¸å…³å·¥å…·
    
    Client->>MetaMCP: è°ƒç”¨å·¥å…·: "execute" (tool="weather_get", args={...})
    MetaMCP->>Servers: è½¬å‘æ‰§è¡Œè¯·æ±‚
    Servers-->>MetaMCP: è¿”å›ç»“æœ
    MetaMCP-->>Client: è¿”å›ç»“æœ
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ³ ä½¿ç”¨ Docker Compose è¿è¡Œï¼ˆæ¨èï¼‰

1.  å…‹éš†ä»“åº“ï¼š
    ```bash
    git clone https://github.com/lukolszewski/metamcp.git
    cd metamcp
    ```

2.  é…ç½®ç¯å¢ƒï¼š
    ```bash
    cp example.env .env
    # ç¼–è¾‘ .env ä»¥è®¾ç½®ä½ çš„ Embedding æä¾›å•† (Ollama, OpenAI ç­‰)
    ```

3.  å¯åŠ¨ï¼š
    ```bash
    docker compose up -d
    ```

    *è®¿é—® UIï¼š`http://localhost:3000`ï¼ˆæˆ–ä½ é…ç½®çš„ç«¯å£ï¼‰ã€‚*

### ğŸ”§ å¼€å‘ç¯å¢ƒ
æˆ‘ä»¬æ”¯æŒ VSCode å’Œ Cursor çš„ **Dev Containers**ã€‚åªéœ€æ‰“å¼€é¡¹ç›®å¹¶ç‚¹å‡» "Reopen in Container"ã€‚è¿™å°†è‡ªåŠ¨è®¾ç½® Node.js è¿è¡Œæ—¶ã€Docker-in-Docker å’Œ PostgreSQLã€‚

## ğŸ”Œ è¿æ¥åˆ° MetaMCP

MetaMCP æš´éœ²çš„ç«¯ç‚¹å…¼å®¹ä»»ä½• MCP å®¢æˆ·ç«¯ï¼ˆClaude Desktop, Cursor ç­‰ï¼‰ã€‚

**Cursor çš„ `mcp.json` ç¤ºä¾‹ï¼š**
```json
{
  "mcpServers": {
    "MetaMCP": {
      "url": "http://localhost:12008/metamcp/<YOUR_ENDPOINT_NAME>/sse"
    }
  }
}
```

**Claude Desktop (ä½¿ç”¨ mcp-proxy)ï¼š**
```json
{
  "mcpServers": {
    "MetaMCP": {
      "command": "uvx",
      "args": [
        "mcp-proxy",
        "http://localhost:12008/metamcp/<YOUR_ENDPOINT_NAME>/sse"
      ],
      "env": {
        "API_ACCESS_TOKEN": "<YOUR_API_KEY>"
      }
    }
  }
}
```

## ğŸ” è®¤è¯ä¸ä¼ä¸šçº§åŠŸèƒ½

MetaMCP ä¸“ä¸ºè§„æ¨¡åŒ–è®¾è®¡ï¼š
* **OIDC/SSOï¼š** è¿æ¥åˆ° Auth0, Keycloak, Google, æˆ– Azure ADã€‚
* **æ³¨å†Œæ§åˆ¶ï¼š** ç‹¬ç«‹åˆ‡æ¢ UI æ³¨å†Œä¸ SSO æ³¨å†Œã€‚
* **å¤šç§Ÿæˆ·ï¼š** ç”¨æˆ·åªèƒ½çœ‹åˆ°è‡ªå·±çš„å‘½åç©ºé—´ï¼›ç®¡ç†å‘˜ç®¡ç†å…¨å±€é…ç½®ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ­£åœ¨æ„å»ºå¼€æºç”Ÿæ€ç³»ç»Ÿä¸­æœ€å…ˆè¿›çš„ MCP ç½‘å…³ã€‚
è¯¦è§ **[CONTRIBUTING.md](CONTRIBUTING.md)** äº†è§£å¦‚ä½•æäº¤ PRã€‚

## ğŸ“„ è®¸å¯è¯

**AGPL-3.0**
*æ³¨æ„ï¼šæœ¬é¡¹ç›®æ˜¯åŸå§‹ MIT è®¸å¯çš„ MetaMCP ä»£ç†çš„ç¡¬åˆ†å‰ï¼ˆHard Forkï¼‰ã€‚ç”±äºå¢åŠ äº†æ™ºèƒ½æ¨¡å¼ã€AI Embeddings å’Œæ•°æ®åº“æŒä¹…åŒ–ç­‰é‡å¤§åŠŸèƒ½ï¼Œæœ¬åˆ†æ”¯æ ¹æ® AGPL-3.0 å‘å¸ƒã€‚*